# web_chatbot

web_chatbot for CITS3403
Set up mysql database--fill the password field, and create corresponding table
Fill the APIKEY and organization for GPT function
Run the flask project

# Purpose #
The purpose of the website was to provide a chatbot with good functionality and A smooth user experience.
We thought that ChatGPT had a lack of design and became too complicated so we decided to redesign it in a more simple and clean way.

# Design, HTML & CSS #
For our design, we used agile processes to ensure efficiency.
We started with a basic template/deliverable for our website, allowing our backend developers to work on functionality whilst we prepared the css.
Next, we used Figma to develop an appealing UI/UX.
After the design was complete on figma, we began importing the CSS into the flask project.
From this point it was just a matter of styling additional functionalities and updates.

### Tools ###
For icons, we took them from Flaticon.com. For many we had to invert the coloring on Aseprite and others we had to edit the opacity.
For fonts, we used Roboto Mono from google fonts. I believe it fits the theme of a chatbot however it doesn't look so modern.
For font-size, we used Typescale.com to create pleasing font sizes.

### Tools Used ###
- Figma
- Aseprite
- Typescale.com
- Flaticon.com
- Google Fonts

---

# Backend functionality #
The backend of the system is built on Flask and divided into two modules: user authentication and conversation.

The user authentication module provides functionalities such as login, logout, registration, and auto-login.

The conversation module allows users to start new conversations, search previous conversations, change conversation titles, and update conversations through chatting.

To ensure system security, we have implemented an encryption mechanism. User passwords stored in the database are encrypted using the MD5 algorithm.

Additionally, we have incorporated JWT (JSON Web Tokens) for access control. When users log in, a new token is generated by applying MD5 encryption to a concatenated 
string of the user's name and the current timestamp. Users have the option to store the token by selecting the "remember me" button on the login page. If selected, the token is stored in local storage, enabling auto-login functionality in subsequent sessions.
The token will expire in 24 hours and every usage of the token will refresh the expiration time.

For chat functionality, we utilize the API provided by OpenAI, enabling users to interact with the GPT-3 model.
# Database design #
The system's database is implemented using a local MySQL server. The data model consists of four main entities: User, Conversation, Statement, and Token.

**1.User: Represents a user of the system.** It includes the following attributes:

id (primary key): Unique identifier for the user. 

password: The user's password (stored in an encrypted form). 

user name: The name/account of the user.

time of creation: The timestamp indicating when the user was created.

**2.Conversation: Represents a conversation between a user and the chatbot.** It includes the following attributes:

id (primary key): Unique identifier for the conversation.

title: The title of the conversation.

addtime: The timestamp indicating when the conversation was initiated.

user id (foreign key): References the associated user who initiated the conversation.

**3.Statement: Represents a single statement within a conversation, either generated by the user or replied by the chatbot.** It includes the following attributes:

id (primary key): Unique identifier for the statement.

content: The content of the statement.

starttime: The timestamp indicating when the statement was created.

title: Specifies whether the statement is from the user or the chatbot.

conversation id (foreign key): References the associated conversation.

**4.Token: Represents the token used for the JWT access mechanism.** It includes the following attributes:

id (primary key): Unique identifier for the token.

content: The content of the token.

timestamp: The timestamp indicating when the token was generated or last refreshed.

user id (foreign key): References the associated user for whom the token was generated.

The timestamp of the token will be updated every time the token is refreshed to maintain its validity and track its usage.

This data model allows for storing and retrieving user information, conversation details, individual statements, and tokens for authentication and access control purposes within the system.
# Testing #
To thoroughly test the functionality of the system, we have created unit tests using the 'unittest' module. These tests cover various scenarios, including normal and abnormal situations. The unit_test.py file is located in the testing directory.

To execute the tests, you can use the following command in the terminal:

python -W ignore -m unittest testing.unit_test

Please note that in order to fully utilize the unit tests, you may need to retrieve data from the database, such as obtaining valid tokens, and manually adjust the sequence of the available test cases. This ensures comprehensive coverage of 
different aspects of the system's functionality during testing.

# How to launch #
1. Run the mysql server locally.
2. Set the local mysql configuration on app.py, input the Username and Password for access to the database.
3. Create a 'chatbot' database on mysql server.
4. Migrate the data model with "flask db init", "flask db migrate" and "flask db upgrade" commands on terminal.
5. Input API key and organization code from openAI on flask_main.py, to reach chat functionality.
6. Launch the flask back end.
7. Open the browser and access the system through "http://127.0.0.1:5000".